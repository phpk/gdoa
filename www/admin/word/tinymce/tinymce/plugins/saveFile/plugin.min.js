tinymce.PluginManager.add('saveFile', function (editor, url) {
  let pluginName = '另存为';

  let openData = function () {
    
  };
  let svgStr = `<svg t="1640281851372" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4064" width="20" height="20"><path d="M128 64a64 64 0 0 0-64 64v640a64 64 0 0 0 64 64h640a64 64 0 0 0 64-64V128a64 64 0 0 0-64-64H128z m0-64h640a128 128 0 0 1 128 128v640a128 128 0 0 1-128 128H128a128 128 0 0 1-128-128V128a128 128 0 0 1 128-128z" fill="#333333" p-id="4065"></path><path d="M256 64v128a64 64 0 0 0 64 64h256a64 64 0 0 0 64-64V64H256zM192 0h512v192a128 128 0 0 1-128 128H320a128 128 0 0 1-128-128V0z" fill="#333333" p-id="4066"></path><path d="M512 128a32 32 0 0 1 64 0v64a32 32 0 0 1-64 0V128zM128 876.032h64v48.384c0 15.616 25.6 35.584 64 35.584h640c38.4 0 64-19.968 64-35.584V227.584C960 211.968 934.4 192 896 192h-61.824V128H896c70.72 0 128 44.544 128 99.584v696.832c0 55.04-57.28 99.584-128 99.584H256c-70.72 0-128-44.544-128-99.584v-48.384z m0 0h64v48.384c0 15.616 25.6 35.584 64 35.584h640c38.4 0 64-19.968 64-35.584V227.584C960 211.968 934.4 192 896 192h-61.824V128H896c70.72 0 128 44.544 128 99.584v696.832c0 55.04-57.28 99.584-128 99.584H256c-70.72 0-128-44.544-128-99.584v-48.384z" fill="#333333" p-id="4067"></path></svg>`;
  
  editor.ui.registry.getAll().icons.saveFile || editor.ui.registry.addIcon('saveFile', svgStr);

  // editor.ui.registry.addButton('saveFile', {
  //   icon: 'saveFile',
  //   tooltip: pluginName,
  //   onAction: function () {
  //     openData();
  //   }
  // });
  editor.ui.registry.addNestedMenuItem('saveFile', {
    icon: 'saveFile',
    text: '另存为',
    getSubmenuItems: function () {
      return [
        {
          text:'Word文件',
          type: 'menuitem',
          onAction:function(){
              console.log('Word文件');
          }
        },
        {
          text:'PDF文件',
          type: 'menuitem',
          onAction:function(){
            console.log('PDF文件');
          }
        },
        {
          text:'MarkDown文件',
          type: 'menuitem',
          onAction:function(){
            console.log('md文件');
          }
        },
        {
          text:'text文件',
          type: 'menuitem',
          onAction:function(){
            console.log('text文件');
          }
        },
        {
          text:'RTF文件',
          type: 'menuitem',
          onAction:function(){
            console.log('RTF文件');
          }
        },
        {
          text:'html文件',
          type: 'menuitem',
          onAction:function(){
            console.log('html文件');
          }
        },
      ]
    }
  });
  return {
    getMetadata: function () {
      return {
        name: pluginName,
        url: "https://godo.im",
      };
    }
  };
});
