<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>角色管理</title>
		<link rel="stylesheet" href="/static/layui/css/layui.css" />
<link rel="stylesheet" href="/static/ui/css/ui.css" />
	</head>
	<body class="pear-container">
		
		<div class="layui-card">
			<div class="layui-card-body">
                <script type="text/html" id="area-bar">
                    <button class="pear-btn pear-btn-primary pear-btn-sm" lay-event="getuser"><i class="layui-icon layui-icon-refresh"></i></button>
                </script>
				<table id="area-table" lay-filter="area-table"></table>
			</div>
		</div>

		
	
		<script src="../../config/config.js"></script>
		<script src="/static/layui/layui.js"></script>
		<script src="/static/ui/ui.js"></script>
		<script>
			layui.use(['table', 'form', 'jquery','common', 'treetable'], function() {
				let table = layui.table;
				let form = layui.form;
				let $ = layui.jquery;
				let common = layui.common;
				let treetable = layui.treetable;

				let MODULE_PATH = "./";

				 window.render = function () {
                    treetable.render({
                        treeColIndex: 1,
                        treeSpid: 0,
                        treeIdName: 'role_id',
                        treePidName: 'pid',
                        skin: 'line',
                        treeDefaultClose: true,
                        toolbar: '#area-toolbar',
						defaultToolbar: [{
						title: '刷新',
						layEvent: 'refresh',
						icon: 'layui-icon-refresh',
					}, 'filter', 'print', 'exports'],
                        elem: '#area-table',
                        url: 'ding/listRole',
                        page: false,
                        cols: [
                            [
                                {
                                    field: 'role_id',
                                    title: 'ID'
                                }, {
                                    field: 'name',
                                    minWidth: 200,
                                    title: '名称'
                                }, {
                                    title: '操作',
                                    templet: '#area-bar',
                                    width: 150,
                                    align: 'center'
                                }
                            ]
                        ]
                    });
                }

                render();
				table.on('tool(area-table)', function (obj) {
                })

                table.on('toolbar(area-table)', function (obj) {
                    if (obj.event === 'refresh') {
                        window.refresh();
                    }
                });
				



				window.refresh = function(param) {
					table.reload('area-table');
				}
			})
		</script>
	</body>
</html>